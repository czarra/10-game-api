name: 'Test Railway Connection Only'

on: workflow_dispatch

jobs:
  debug-connection:
    runs-on: ubuntu-latest
    steps:
      - name: 'Install Railway CLI'
        run: curl -fsSL https://railway.app/install.sh | sh

      - name: 'üïµÔ∏è SECRET DEBUG'
        env:
          MY_TOKEN: ${{ secrets.RAILWAY_TOKEN }}
        run: |
          echo "--- SPRAWDZANIE TOKENA ---"
          if [ -z "$MY_TOKEN" ]; then
            echo "‚ùå B≈ÅƒÑD: GitHub nie widzi sekretu! Upewnij siƒô, ≈ºe doda≈Çe≈õ go do 'Repository Secrets'."
            exit 1
          fi
          
          LENGTH=${#MY_TOKEN}
          echo "‚ÑπÔ∏è D≈Çugo≈õƒá tokena: $LENGTH znak√≥w"
          echo "‚ÑπÔ∏è Pierwsze 4 znaki: ${MY_TOKEN:0:4}..."
          
          # Sprawdzenie bia≈Çych znak√≥w
          if [[ "$MY_TOKEN" =~ [[:space:]] ]]; then
             echo "‚ùå B≈ÅƒÑD: Token zawiera spacje lub entery! Edytuj sekret i usu≈Ñ bia≈Çe znaki."
             exit 1
          else
             echo "‚úÖ Token nie zawiera spacji."
          fi

      - name: 'Check Connection'
        env:
          RAILWAY_TOKEN: ${{ secrets.RAILWAY_TOKEN }}
        run: |
          echo "Pr√≥ba logowania..."
          railway whoami