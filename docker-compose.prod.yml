# docker-compose.prod.yml
# This file overrides the base docker-compose.yml for a production-like environment.

version: '3.8'

services:
  php:
    build:
      context: .
      dockerfile: php/Dockerfile.prod
    # The 'volumes' override is crucial.
    # An empty 'volumes' list prevents the local source code from being mounted,
    # forcing the container to use the code baked into the image.
    volumes: []
    env_file:
      - .env.prod
    container_name: php8_10_game_prod

  # We also override the nginx service to not mount the source code,
  # although it will still mount the config file.
  nginx:
    volumes:
      - ./nginx/default.conf:/etc/nginx/conf.d/default.conf
    container_name: nginx3_10_game_prod